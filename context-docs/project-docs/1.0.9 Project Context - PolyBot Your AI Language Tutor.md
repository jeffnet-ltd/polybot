**Version:** 1.0.9 (LMS Core Active) **Status:** Development - Implementing Progress Persistence **Last Updated:** 2025-11-27 **Dev Environment:** HP EliteBook 820 G4 / Windows 11 WSL2 (NVIDIA RTX 2080 Ti - CPU Mode for stability)

## Executive Summary

Polybot is an **AI-powered multilingual language learning platform** that runs entirely locally. It provides structured conversational practice based on the **CEFR** curriculum.

**Current Status:** The "Lesson View" transformation is complete. Users can browse the A1 curriculum, study vocabulary, complete interactive exercises, and launch a context-aware chat session. The backend automatically seeds this content into MongoDB.

## Technical Architecture

### Stack Overview

```
Frontend: React 18.2.0 + Tailwind CSS + Lucide React
Backend: FastAPI (Python 3.11) + BLOOM AI (Instruct Tuned)
Database: MongoDB 7.0
Infrastructure: Docker + Docker Compose (V2)
AI Model: BLOOMZ 3b (Loaded on CPU)
```

### Key Data Flow (Verified)

1. **Curriculum Load:** Frontend fetches `GET /lessons` -> Backend returns seeded A1 JSON.
    
2. **Lesson Selection:** User clicks lesson -> Frontend displays Vocab/Exercises.
    
3. **Interactive Exercises:** User completes fill-in-the-blank/flashcards (Client-side logic currently).
    
4. **Contextual Chat:** User enters chat -> Backend injects specific `ai_prompt_context` (e.g., "Focus on Greetings") into the LLM prompt.
    

## Update Log

**Session: Lesson & Exercise UI**

- **Backend:** Expanded `Lesson` schema to include `vocabulary` and `exercises`.
    
- **Backend:** Updated `seed_lessons` with rich content for A1.1.
    
- **Frontend:** Implemented `LessonDetailView` with tabs for Overview/Exercises.
    
- **Frontend:** Built `ExerciseView` for interactive drilling.
    
- **Frontend:** Updated `ChatTutorView` to display active lesson context.
    

## Current Critical Issues

- **Progress is Transient:** When a user completes exercises or finishes a chat, the XP/Score is displayed (e.g., via `alert`) but **not saved to the database**. If they refresh, their progress is lost.
    
- **Content Gaps:** Only Lesson A1.1 has real exercises. A1.2+ are empty placeholders.
    
- **Passive Chat:** The AI waits for the user to speak first. In a "Boss Fight," the AI should ideally initiate the scenario (e.g., "I am the waiter, what do you want?").
    

## Next Steps (Prioritized)

1. **Persist Progress (Gamification):** Create a `POST /user/progress` endpoint to save XP, completed lessons, and streak updates to MongoDB.
    
2. **AI Initiation ("Boss Fight"):** Update the chat logic so the AI sends the first message to set the scene for the lesson scenario.
    
3. **Audio (TTS):** Add "Click to Listen" buttons for vocabulary using the browser's native Speech API.