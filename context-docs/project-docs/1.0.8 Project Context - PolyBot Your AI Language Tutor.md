**Version:** 1.0.8 (Curriculum Live - Optimization Phase) **Status:** Development - Tuning AI Quality **Last Updated:** 2025-11-27 **Dev Environment:** HP EliteBook 820 G4 / Windows 11 WSL2 (NVIDIA RTX 2080 Ti - GPU Support Disabled for Stability)

## Executive Summary

Polybot is an **AI-powered multilingual language learning platform** that runs entirely locally. It provides structured conversational practice based on the **CEFR** curriculum.

**Key Differentiator:** True bilingual learning - users learn in their target language while receiving explanations in their native language.

**Current Status:** The system is fully functional end-to-end. Users can register, select a CEFR A1 lesson from the database, and chat with the AI using lesson-specific context. The AI is currently running on CPU (High Latency) using the base BLOOM model.

## Technical Architecture

### Stack Overview

```
Frontend: React 18.2.0 + Tailwind CSS + Lucide React
Backend: FastAPI (Python 3.11) + BLOOM AI
Database: MongoDB 7.0
Infrastructure: Docker + Docker Compose (V2)
AI Model: BLOOM 3b (Loaded on CPU)
```

### System Architecture

```
┌─────────────┐      ┌─────────────┐      ┌─────────────┐
│   React     │────▶│   FastAPI   │────▶│   MongoDB   │
│  Frontend   │      │   Backend   │      │   Database  │
│  Port 3000  │      │  Port 8000  │      │ Port 27017  │
└─────────────┘      └─────────────┘      └─────────────┘
                            │
                            ▼
                     ┌─────────────┐
                     │ BLOOM Model │
                     │ (Local AI)  │
                     └─────────────┘
```

### Key Data Flow (Verified)

1. **Registration:** User creates profile -> Saved to MongoDB `users` collection.
    
2. **Curriculum:** Frontend fetches `A1` modules from MongoDB `lessons` collection (auto-seeded).
    
3. **Practice:** User selects lesson -> Chat initiates with `lesson_id`.
    
4. **Inference:** Backend retrieves lesson context (e.g., "Focus on Salutations"), constructs prompt, and generates response.
    

## Update Log

**Session: Curriculum Integration**

- **Feature:** Implemented `seed_lessons` in `server.py` to populate CEFR A1 curriculum in MongoDB.
    
- **Feature:** Added `GET /lessons` endpoint.
    
- **Frontend:** Updated `App.jsx` to fetch and display dynamic Lesson list.
    
- **Frontend:** Implemented `lesson_id` passing in chat for contextual AI prompts.
    
- **Validation:** End-to-end flow verified (Input "Ciao" -> AI Response generated).
    

**Session: Network & Stability**

- **Fix:** Increased Axios timeout to **300s (5 mins)** to accommodate CPU inference time.
    
- **Fix:** Switched back to CPU inference (`deploy` section commented out) to resolve driver conflicts on Native WSL.
    
- **Fix:** Implemented robust Background Model Loading to prevent health check failures.
    

## Current Critical Issues

- **AI Quality:** The current model (`bloom-3b` base) produces incoherent, run-on responses because it lacks instruction tuning. It "autocompletes" the conversation rather than acting as a tutor.
    
- **Progress Tracking:** While users can chat, their XP, Word Count, and Lesson Mastery scores are not being saved to the database after a conversation.
    

## Next Steps (Prioritized)

1. **Upgrade to Instruct Model:** Switch `.env` to use **`bigscience/bloomz-3b`**. This is the instruction-tuned version of the same model, which will drastically improve coherence and adherence to the "CORRECTION/EXPLANATION" format.
    
2. **Implement Progress Persistence:** Update `server.py` to calculate XP updates and write them to the `users` collection in MongoDB after every message.
    
3. **GPU Reactivation:** Re-attempt NVIDIA Container Toolkit setup (on Native WSL) to bring response times down from ~60s to ~1s.